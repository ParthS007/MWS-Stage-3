"use strict";var map,restaurant=void 0;window.initMap=function(){fetchRestaurantFromURL(function(e,t){e?console.error(e):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:t.latlng,scrollwheel:!1}),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})},fetchRestaurantFromURL=function(n){if(self.restaurant)n(null,self.restaurant);else{var e=getParameterByName("id");e?DBHelper.fetchRestaurantById(e,function(e,t){(self.restaurant=t)?(fillRestaurantHTML(),n(null,t)):console.error(e)}):(error="No restaurant id in URL",n(error,null))}},fillRestaurantHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("restaurant-name");t.innerHTML=e.name,t.tabIndex=0;var n=document.getElementById("restaurant-address");n.innerHTML=e.address,n.tabIndex=0;var a="small",r=a,l=document.getElementById("restaurant-img");window.matchMedia("screen and (min-width: 1000px)")?r="medium":window.matchMedia("screen and (min-width: 600px)")&&(r=a),l.className="restaurant-img lazyload",l.setAttribute("data-src",DBHelper.imageUrlForRestaurant(e,r)),l.alt=e.name+" resturant picture";var d=document.getElementById("restaurant-cuisine");d.innerHTML=e.cuisine_type,d.tabIndex=0,e.operating_hours&&fillRestaurantHoursHTML(),DBHelper.fetchReviews(e.id)},fillRestaurantHoursHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,t=document.getElementById("restaurant-hours");for(var n in e){var a=document.createElement("tr");a.tabIndex=0;var r=document.createElement("td");r.innerHTML=n,a.appendChild(r);var l=document.createElement("td");l.innerHTML=e[n],a.appendChild(l),t.appendChild(a)}},fillReviewsHTML=function(e){var t=document.getElementById("reviews-container"),n=document.createElement("h3");if(n.innerHTML="Reviews",n.tabIndex=0,t.appendChild(n),!e){var a=document.createElement("p");return a.innerHTML="No reviews yet!",void t.appendChild(a)}var r=document.getElementById("reviews-list");e.forEach(function(e){r.appendChild(createReviewHTML(e))}),t.appendChild(r)},createReviewHTML=function(e){var t=document.createElement("li"),n=document.createElement("p");n.innerHTML=e.name,n.tabIndex=0,t.appendChild(n);var a=document.createElement("p");a.innerHTML=e.createdAt,a.tabIndex=0,t.appendChild(a);var r=document.createElement("p");r.innerHTML="Rating: "+e.rating,r.tabIndex=0,t.appendChild(r);var l=document.createElement("p");return l.innerHTML=e.comments,l.tabIndex=0,t.appendChild(l),t},fillBreadcrumb=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("breadcrumb"),n=document.createElement("li");n.innerHTML=e.name,t.appendChild(n)},getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},clearForm=function(){document.querySelector("#name").value="",document.querySelector("#rate").value="",document.querySelector("#comment").value=""},markFavourite=function(e){var t=getParameterByName("id"),n=(e.classList.toggle("checked"),e.classList.contains("checked"));DBHelper.submitFavRestaurant(t,n)};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3RhdXJhbnRfaW5mby5qcyJdLCJuYW1lcyI6WyJtYXAiLCJyZXN0YXVyYW50Iiwid2luZG93IiwiaW5pdE1hcCIsImZldGNoUmVzdGF1cmFudEZyb21VUkwiLCJlcnJvciIsInNlbGYiLCJnb29nbGUiLCJtYXBzIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNvbnNvbGUiLCJjZW50ZXIiLCJsYXRsbmciLCJzY3JvbGx3aGVlbCIsImNhbGxiYWNrIiwiaWQiLCJnZXRQYXJhbWV0ZXJCeU5hbWUiLCJEQkhlbHBlciIsImZldGNoUmVzdGF1cmFudEJ5SWQiLCJmaWxsUmVzdGF1cmFudEhUTUwiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJuYW1lIiwiaW5uZXJIVE1MIiwidGFiSW5kZXgiLCJhZGRyZXNzIiwiaW1hZ2UiLCJtYXRjaE1lZGlhIiwic2l6ZSIsInNtYWxsIiwiYmlnIiwiaW1hZ2VVcmxGb3JSZXN0YXVyYW50IiwiYWx0IiwiY3Vpc2luZSIsImNsYXNzTmFtZSIsImN1aXNpbmVfdHlwZSIsIm9wZXJhdGluZ19ob3VycyIsImZpbGxSZXN0YXVyYW50SG91cnNIVE1MIiwiZmV0Y2hSZXZpZXdzIiwiaG91cnMiLCJrZXkiLCJvcGVyYXRpbmdIb3VycyIsInJvdyIsImNyZWF0ZUVsZW1lbnQiLCJkYXkiLCJhcHBlbmRDaGlsZCIsInRpbWUiLCJmaWxsUmV2aWV3c0hUTUwiLCJyZXZpZXdzIiwidGl0bGUiLCJjb250YWluZXIiLCJub1Jldmlld3MiLCJmb3JFYWNoIiwicmV2aWV3IiwidWwiLCJjcmVhdGVSZXZpZXdIVE1MIiwibGkiLCJkYXRlIiwiY3JlYXRlZEF0IiwicmF0aW5nIiwiY29tbWVudHMiLCJicmVhZGNydW1iIiwidXJsIiwicmVwbGFjZSIsInJlc3VsdHMiLCJleGVjIiwiY2xlYXJGb3JtIiwicmVnZXgiLCJ2YWx1ZSIsIm1hcmtGYXZvdXJpdGUiLCJmYXZTdGFyIiwicXVlcnlTZWxlY3RvciIsImNvbnRhaW5zIiwic3VibWl0RmF2UmVzdGF1cmFudCIsImZsYWciXSwibWFwcGluZ3MiOiJhQUFBLElBQ0lBLElBREFDLGdCQUFBQSxFQU1KQyxPQUFPQyxRQUFVLFdBQ2ZDLHVCQUF1QixTQUFDQyxFQUFPSixHQUQxQkUsRUFDTEMsUUFBQUEsTUFBQUEsSUFDZUUsS0FBQU4sSUFBQSxJQUFBTyxPQUFBQyxLQUFBQyxJQUFBQyxTQUFBQyxlQUFBLE9BQUEsQ0FDWEMsS0FBUVAsR0FEVlEsT0FFT1osRUFBQWEsT0FDTFIsYUFBZUMsSUFFYk0saUJBQ0FFLFNBQUFBLHVCQUFhVCxLQUFBTCxXQUFBSyxLQUFBTixTQVFyQkksdUJBQUEsU0FBQVksR0FJRSxHQUFJVixLQUFLTCxXQUNQZSxFQUFTLEtBQU1WLEtBQUtMLGdCQUR0QixDQUF1QixJQUFBZ0IsRUFBQUMsbUJBQUEsTUFDckJGLEVBSUZHLFNBQVNDLG9CQUFBSCxFQUFBLFNBQUFaLEVBQUFKLElBQUVLLEtBQUFMLFdBQUFBLElBS1BLLHFCQUNBVSxFQUFLZixLQUFMQSxJQUpGZSxRQUFTWCxNQUFPQSxNQUxoQkEsTUFBQSwwQkFDRFcsRUFBQVgsTUFBQSxTQWdCRmdCLG1CQXBCRCxXQUFBLElBQUFwQixFQUFBLEVBQUFxQixVQUFBQyxhQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBQWhCLEtBQUFMLFdBMEJRd0IsRUFBT2YsU0FBU0MsZUFBZSxtQkFKdkNjLEVBQUFDLFVBQUF6QixFQUFBd0IsS0FNRUEsRUFBS0UsU0FBVyxFQUhsQk4sSUFBQUEsRUFBQUEsU0FBcUJWLGVBQUEsc0JBQWtDaUIsRUFBakMzQixVQUFpQ0EsRUFBQTJCLFFBT3JEQSxFQUFRRCxTQUFXLEVBTG5CRixJQUFLQyxFQUFMLFFBQ0FELEVBQUtFLEVBUUNFLEVBQVFuQixTQUFTQyxlQUFlLGtCQUx0Q2lCLE9BQVFGLFdBQVl6QixrQ0FDcEIyQixFQUxBLFNBYVMxQixPQUFPNEIsV0FBVyxtQ0FOM0JDLEVBQU1DLEdBQU5ILEVBQTBDSSxVQUExQywwQkFFQUosRUFBTUEsYUFBUW5CLFdBQVNDLFNBQWV1QixzQkFBdENqQyxFQUFBOEIsSUFVQUYsRUFBTU0sSUFBTWxDLEVBQVd3QixLQUFPLHFCQUU5QixJQUFNVyxFQUFVMUIsU0FBU0MsZUFBZSxzQkFMeENrQixFQUFNUSxVQUFZcEMsRUFBQXFDLGFBQ2xCRixFQUFBVCxTQUFBLEVBU0kxQixFQUFXc0MsaUJBTGZDLDBCQVNBckIsU0FBU3NCLGFBQWF4QyxFQUFXZ0IsS0FBakNFLHdCQUFzQmxCLFdBQXRCLElBQXNCQSxFQUF0QixFQUFBcUIsVUFBQUMsYUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQUFoQixLQUFBTCxXQUFBc0MsZ0JBaENGRyxFQUFBaEMsU0FBQUMsZUFBQSxvQkF3Q0UsSUFBSyxJQUFJZ0MsS0FBT0MsRUFBZ0IsQ0FMbEMsSUFBQUMsRUFBQW5DLFNBQUFvQyxjQUFBLE1BT0lELEVBQUlsQixTQUFXLEVBSm5CYSxJQUFBQSxFQUFBQSxTQUFBQSxjQUEwQixNQUFzRE8sRUFBckRILFVBQXFERCxFQVE1RUUsRUFBSUcsWUFBWUQsR0FObEIsSUFBS0UsRUFBTHZDLFNBQWdCa0MsY0FBZ0IsTUFDOUJLLEVBQU1KLFVBQU1uQyxFQUFBaUMsR0FDWkUsRUFBSWxCLFlBQUpzQixHQUVBUCxFQUFNSyxZQUFNckMsS0FlaEJ3QyxnQkFBa0IsU0FBQ0MsR0FQZlQsSUFBQUEsRUFBTU0sU0FBTnJDLGVBQUEscUJBQ0R5QyxFQUFBMUMsU0FBQW9DLGNBQUEsTUFhRCxHQTVCRk0sRUFBQTFCLFVBQUEsVUF5QkUwQixFQUFNekIsU0FBVyxFQVBuQjBCLEVBQUFMLFlBQUFJLElBVU9ELEVBQVMsQ0FQaEJELElBQUFBLEVBQWtCeEMsU0FBQW9DLGNBQUNLLEtBR2pCQyxPQUZBRSxFQUFNRCxVQUFZM0MsdUJBQ2xCMkMsRUFBYzNDLFlBQVNvQyxHQUd2Qk8sSUFBQUEsRUFBVUwsU0FBQUEsZUFBVixnQkFTQUcsRUFBUUksUUFBUSxTQUFBQyxHQVBoQkMsRUFBS04sWUFBU08saUJBQUFGLE1BRVpGLEVBQUFBLFlBQUFHLElBTUFBLGlCQUFlQyxTQUFBQSxHQUNoQixJQUZEQyxFQUFBakQsU0FBQW9DLGNBQUEsTUFHQU8sRUFBVUwsU0FBWVMsY0FBdEIsS0FqQkZoQyxFQUFBQyxVQUFBOEIsRUFBQS9CLEtBMkJFQSxFQUFLRSxTQUFXLEVBUGxCZ0MsRUFBQVgsWUFBQXZCLEdBVUUsSUFBTW1DLEVBQU9sRCxTQUFTb0MsY0FBYyxLQVB0Q1ksRUFBQUEsVUFBbUJGLEVBQUFLLFVBQ2pCRCxFQUFNRCxTQUFLakQsRUFDWGlELEVBQUFYLFlBQWF0QyxHQUViZSxJQUFLRSxFQUFMakIsU0FBQW9DLGNBQUEsS0FDQWEsRUFBR1gsVUFBSFcsV0FBQUgsRUFBQU0sT0FTQUEsRUFBT25DLFNBQVcsRUFQbEJnQyxFQUFBWCxZQUFhdEMsR0FFYmtELElBQUtqQyxFQUFMakIsU0FBQW9DLGNBQUEsS0FLQWdCLE9BSkFILEVBQUdYLFVBQUhRLEVBQUFPLFNBU0FBLEVBQVNwQyxTQUFXLEVBUHBCZ0MsRUFBQVgsWUFBZXRDLEdBRVJpQixHQU1QZ0MsZUFBZUksV0FBZixJQUFlQSxFQUFmLEVBQUF6QyxVQUFBQyxhQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBQWhCLEtBQUFMLFdBU00rRCxFQUFhdEQsU0FBU0MsZUFBZSxjQVAzQ2dELEVBQUFqRCxTQUFBb0MsY0FBQSxNQXRCRmEsRUFBQWpDLFVBQUF6QixFQUFBd0IsS0FnQ0V1QyxFQUFXaEIsWUFBWVcsSUFNekJ6QyxtQkFBcUIsU0FBQ08sRUFBTXdDLEdBVHBCRCxJQUNOQyxFQUFNTixPQUFLakQsU0FBU29DLE1BQ3BCYSxFQUFHakMsRUFBSHdDLFFBQWVqRSxVQUFmLFFBQ0ErRCxJQUpGRyxFQUlhbkIsSUFBQUEsT0FBQUEsT0FBWHZCLEVBQVd1QixxQkFKYm9CLEtBQUFILEdBZ0JFLE9BQUtFLEVBRUFBLEVBQVEsR0FSZmpELG1CQUFxQmlELEVBQUEsR0FBQUQsUUFBQSxNQUFBLE1BU1YsR0FaWCxNQU9FRyxVQUFNQyxXQUFONUQsU0FDRXlELGNBQWdCQyxTQURsQkcsTUFBQSxHQUVBN0QsU0FBS3lELGNBQ0ksU0FBUEksTUFBQSxHQUNGN0QsU0FBS3lELGNBQ0gsWUFBQUksTUFBQSxJQVVKQyxjQUFnQixTQUFDQyxHQU5qQkosSUFBQUEsRUFBQUEsbUJBQVksTUFHVjNELEdBREFBLEVBQUFBLFVBQVNnRSxPQUFjLFdBQ2RBLEVBQUFBLFVBQWNDLFNBQVlKLFlBSHJDcEQsU0FBQXlELG9CQUFBM0QsRUFBQTREIiwiZmlsZSI6InJlc3RhdXJhbnRfaW5mby5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCByZXN0YXVyYW50O1xudmFyIG1hcDtcblxuLyoqXG4gKiBJbml0aWFsaXplIEdvb2dsZSBtYXAsIGNhbGxlZCBmcm9tIEhUTUwuXG4gKi9cbndpbmRvdy5pbml0TWFwID0gKCkgPT4ge1xuICBmZXRjaFJlc3RhdXJhbnRGcm9tVVJMKChlcnJvciwgcmVzdGF1cmFudCkgPT4ge1xuICAgIGlmIChlcnJvcikgeyAvLyBHb3QgYW4gZXJyb3IhXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZi5tYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSwge1xuICAgICAgICB6b29tOiAxNixcbiAgICAgICAgY2VudGVyOiByZXN0YXVyYW50LmxhdGxuZyxcbiAgICAgICAgc2Nyb2xsd2hlZWw6IGZhbHNlXG4gICAgICB9KTtcbiAgICAgIGZpbGxCcmVhZGNydW1iKCk7XG4gICAgICBEQkhlbHBlci5tYXBNYXJrZXJGb3JSZXN0YXVyYW50KHNlbGYucmVzdGF1cmFudCwgc2VsZi5tYXApO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vKipcbiAqIEdldCBjdXJyZW50IHJlc3RhdXJhbnQgZnJvbSBwYWdlIFVSTC5cbiAqL1xuZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCA9IChjYWxsYmFjaykgPT4ge1xuICBpZiAoc2VsZi5yZXN0YXVyYW50KSB7IC8vIHJlc3RhdXJhbnQgYWxyZWFkeSBmZXRjaGVkIVxuICAgIGNhbGxiYWNrKG51bGwsIHNlbGYucmVzdGF1cmFudCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGlkID0gZ2V0UGFyYW1ldGVyQnlOYW1lKCdpZCcpO1xuICBpZiAoIWlkKSB7IC8vIG5vIGlkIGZvdW5kIGluIFVSTFxuICAgIGVycm9yID0gJ05vIHJlc3RhdXJhbnQgaWQgaW4gVVJMJztcbiAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XG4gIH0gZWxzZSB7XG4gICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50QnlJZChpZCwgKGVycm9yLCByZXN0YXVyYW50KSA9PiB7XG4gICAgICBzZWxmLnJlc3RhdXJhbnQgPSByZXN0YXVyYW50O1xuICAgICAgaWYgKCFyZXN0YXVyYW50KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBmaWxsUmVzdGF1cmFudEhUTUwoKTtcbiAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3RhdXJhbnQpO1xuICAgIH0pO1xuICB9XG59O1xuXG4vKipcbiAqIENyZWF0ZSByZXN0YXVyYW50IEhUTUwgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZVxuICovXG5maWxsUmVzdGF1cmFudEhUTUwgPSAocmVzdGF1cmFudCA9IHNlbGYucmVzdGF1cmFudCkgPT4ge1xuICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtbmFtZScpO1xuICBuYW1lLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcbiAgbmFtZS50YWJJbmRleCA9IDA7XG5cbiAgY29uc3QgYWRkcmVzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWFkZHJlc3MnKTtcbiAgYWRkcmVzcy5pbm5lckhUTUwgPSByZXN0YXVyYW50LmFkZHJlc3M7XG4gIGFkZHJlc3MudGFiSW5kZXggPSAwO1xuXG4gIGNvbnN0IHNtYWxsID0gJ3NtYWxsJywgbWVkaXVtID0gJ21lZGl1bScsIGJpZyA9ICdiaWcnO1xuICBsZXQgc2l6ZSA9IHNtYWxsO1xuICBjb25zdCBpbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWltZycpO1xuXG4gIGlmKHdpbmRvdy5tYXRjaE1lZGlhKCdzY3JlZW4gYW5kIChtaW4td2lkdGg6IDEwMDBweCknKSlcbiAgICBzaXplID0gbWVkaXVtO1xuICBlbHNlIGlmICh3aW5kb3cubWF0Y2hNZWRpYSgnc2NyZWVuIGFuZCAobWluLXdpZHRoOiA2MDBweCknKSlcbiAgICBzaXplID0gc21hbGw7XG4gICAgXG4gIGltYWdlLmNsYXNzTmFtZSA9ICdyZXN0YXVyYW50LWltZyBsYXp5bG9hZCc7XG4gIC8vaW1hZ2Uuc3JjID0gJyc7XG4gIGltYWdlLnNldEF0dHJpYnV0ZSgnZGF0YS1zcmMnLCBEQkhlbHBlci5pbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgc2l6ZSkpO1xuICBpbWFnZS5hbHQgPSByZXN0YXVyYW50Lm5hbWUgKyAnIHJlc3R1cmFudCBwaWN0dXJlJztcblxuICBjb25zdCBjdWlzaW5lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtY3Vpc2luZScpO1xuICBjdWlzaW5lLmlubmVySFRNTCA9IHJlc3RhdXJhbnQuY3Vpc2luZV90eXBlO1xuICBjdWlzaW5lLnRhYkluZGV4ID0gMDtcblxuICAvLyBmaWxsIG9wZXJhdGluZyBob3Vyc1xuICBpZiAocmVzdGF1cmFudC5vcGVyYXRpbmdfaG91cnMpIHtcbiAgICBmaWxsUmVzdGF1cmFudEhvdXJzSFRNTCgpO1xuICB9XG4gIC8vIGZpbGwgcmV2aWV3c1xuICBEQkhlbHBlci5mZXRjaFJldmlld3MocmVzdGF1cmFudC5pZCk7XG59O1xuXG4vKipcbiAqIENyZWF0ZSByZXN0YXVyYW50IG9wZXJhdGluZyBob3VycyBIVE1MIHRhYmxlIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2UuXG4gKi9cbmZpbGxSZXN0YXVyYW50SG91cnNIVE1MID0gKG9wZXJhdGluZ0hvdXJzID0gc2VsZi5yZXN0YXVyYW50Lm9wZXJhdGluZ19ob3VycykgPT4ge1xuICBjb25zdCBob3VycyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWhvdXJzJyk7XG4gIGZvciAobGV0IGtleSBpbiBvcGVyYXRpbmdIb3Vycykge1xuICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgcm93LnRhYkluZGV4ID0gMDsgXG5cbiAgICBjb25zdCBkYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgIGRheS5pbm5lckhUTUwgPSBrZXk7XG4gICAgcm93LmFwcGVuZENoaWxkKGRheSk7XG5cbiAgICBjb25zdCB0aW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICB0aW1lLmlubmVySFRNTCA9IG9wZXJhdGluZ0hvdXJzW2tleV07XG4gICAgcm93LmFwcGVuZENoaWxkKHRpbWUpO1xuXG4gICAgaG91cnMuYXBwZW5kQ2hpbGQocm93KTtcbiAgfVxufTtcblxuLyoqXG4gKiBDcmVhdGUgYWxsIHJldmlld3MgSFRNTCBhbmQgYWRkIHRoZW0gdG8gdGhlIHdlYnBhZ2UuXG4gKi9cbmZpbGxSZXZpZXdzSFRNTCA9IChyZXZpZXdzKSA9PiB7XG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXZpZXdzLWNvbnRhaW5lcicpO1xuICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7XG4gIHRpdGxlLmlubmVySFRNTCA9ICdSZXZpZXdzJztcbiAgdGl0bGUudGFiSW5kZXggPSAwO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGl0bGUpO1xuXG4gIGlmICghcmV2aWV3cykge1xuICAgIGNvbnN0IG5vUmV2aWV3cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICBub1Jldmlld3MuaW5uZXJIVE1MID0gJ05vIHJldmlld3MgeWV0ISc7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG5vUmV2aWV3cyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jldmlld3MtbGlzdCcpO1xuICByZXZpZXdzLmZvckVhY2gocmV2aWV3ID0+IHtcbiAgICB1bC5hcHBlbmRDaGlsZChjcmVhdGVSZXZpZXdIVE1MKHJldmlldykpO1xuICB9KTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKHVsKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIHJldmlldyBIVE1MIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2UuXG4gKi9cbmNyZWF0ZVJldmlld0hUTUwgPSAocmV2aWV3KSA9PiB7XG4gIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgbmFtZS5pbm5lckhUTUwgPSByZXZpZXcubmFtZTtcbiAgbmFtZS50YWJJbmRleCA9IDA7XG4gIGxpLmFwcGVuZENoaWxkKG5hbWUpO1xuXG4gIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIGRhdGUuaW5uZXJIVE1MID0gcmV2aWV3LmNyZWF0ZWRBdDtcbiAgZGF0ZS50YWJJbmRleCA9IDA7XG4gIGxpLmFwcGVuZENoaWxkKGRhdGUpO1xuXG4gIGNvbnN0IHJhdGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgcmF0aW5nLmlubmVySFRNTCA9IGBSYXRpbmc6ICR7cmV2aWV3LnJhdGluZ31gO1xuICByYXRpbmcudGFiSW5kZXggPSAwO1xuICBsaS5hcHBlbmRDaGlsZChyYXRpbmcpO1xuXG4gIGNvbnN0IGNvbW1lbnRzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICBjb21tZW50cy5pbm5lckhUTUwgPSByZXZpZXcuY29tbWVudHM7XG4gIGNvbW1lbnRzLnRhYkluZGV4ID0gMDtcbiAgbGkuYXBwZW5kQ2hpbGQoY29tbWVudHMpO1xuXG4gIHJldHVybiBsaTtcbn07XG5cbi8qKlxuICogQWRkIHJlc3RhdXJhbnQgbmFtZSB0byB0aGUgYnJlYWRjcnVtYiBuYXZpZ2F0aW9uIG1lbnVcbiAqL1xuZmlsbEJyZWFkY3J1bWIgPSAocmVzdGF1cmFudD1zZWxmLnJlc3RhdXJhbnQpID0+IHtcbiAgY29uc3QgYnJlYWRjcnVtYiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdicmVhZGNydW1iJyk7XG4gIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgbGkuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lO1xuICBicmVhZGNydW1iLmFwcGVuZENoaWxkKGxpKTtcbn07XG5cbi8qKlxuICogR2V0IGEgcGFyYW1ldGVyIGJ5IG5hbWUgZnJvbSBwYWdlIFVSTC5cbiAqL1xuZ2V0UGFyYW1ldGVyQnlOYW1lID0gKG5hbWUsIHVybCkgPT4ge1xuICBpZiAoIXVybClcbiAgICB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW1xcW1xcXV0vZywgJ1xcXFwkJicpO1xuICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYFs/Jl0ke25hbWV9KD0oW14mI10qKXwmfCN8JClgKSxcbiAgICByZXN1bHRzID0gcmVnZXguZXhlYyh1cmwpO1xuICBpZiAoIXJlc3VsdHMpXG4gICAgcmV0dXJuIG51bGw7XG4gIGlmICghcmVzdWx0c1syXSlcbiAgICByZXR1cm4gJyc7XG4gIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0c1syXS5yZXBsYWNlKC9cXCsvZywgJyAnKSk7XG59O1xuXG5jbGVhckZvcm0gPSAoKSA9PiB7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lJykudmFsdWUgPSAnJztcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3JhdGUnKS52YWx1ZSA9ICcnO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29tbWVudCcpLnZhbHVlID0gJyc7XG59XG5cbm1hcmtGYXZvdXJpdGUgPSAoZmF2U3RhcikgPT4ge1xuICBsZXQgaWQgPSBnZXRQYXJhbWV0ZXJCeU5hbWUoJ2lkJyk7XG4gIGxldCBuYW1lID0gXG4gIGZhdlN0YXIuY2xhc3NMaXN0LnRvZ2dsZSgnY2hlY2tlZCcpO1xuICBsZXQgZmxhZyA9IGZhdlN0YXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdjaGVja2VkJyk7XG4gIERCSGVscGVyLnN1Ym1pdEZhdlJlc3RhdXJhbnQoaWQsIGZsYWcpO1xufVxuIl19

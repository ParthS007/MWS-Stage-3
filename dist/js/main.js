"use strict";var map,restaurants=void 0,neighborhoods=void 0,cuisines=void 0,markers=[];document.addEventListener("DOMContentLoaded",function(e){fetchNeighborhoods(),fetchCuisines()}),fetchNeighborhoods=function(){DBHelper.fetchNeighborhoods(function(e,n){e?console.error(e):(self.neighborhoods=n,fillNeighborhoodsHTML())})},fillNeighborhoodsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.neighborhoods,t=document.getElementById("neighborhoods-select");e.forEach(function(e){var n=document.createElement("option");n.innerHTML=e,n.value=e,t.append(n)})},fetchCuisines=function(){DBHelper.fetchCuisines(function(e,n){e?console.error(e):(self.cuisines=n,fillCuisinesHTML())})},fillCuisinesHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.cuisines,t=document.getElementById("cuisines-select");e.forEach(function(e){var n=document.createElement("option");n.innerHTML=e,n.value=e,t.append(n)})},window.initMap=function(){toggle_map();self.map=new google.maps.Map(document.getElementById("map"),{zoom:12,center:{lat:40.722216,lng:-73.987501},scrollwheel:!1}),updateRestaurants()},updateRestaurants=function(){var e=document.getElementById("cuisines-select"),n=document.getElementById("neighborhoods-select"),t=e.selectedIndex,a=n.selectedIndex,r=e[t].value,o=n[a].value;DBHelper.fetchRestaurantByCuisineAndNeighborhood(r,o,function(e,n){e?console.error(e):(resetRestaurants(n),fillRestaurantsHTML())})},resetRestaurants=function(e){self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",self.markers.forEach(function(e){return e.setMap(null)}),self.markers=[],self.restaurants=e},fillRestaurantsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants,n=document.getElementById("restaurants-list");e.forEach(function(e){n.append(createRestaurantHTML(e))}),addMarkersToMap()},createRestaurantHTML=function(e){var n=document.createElement("li"),t="small",a=t;window.matchMedia("screen and (min-width: 1000px)")?a="medium":window.matchMedia("screen and (min-width: 600px)")&&(a=t);var r=document.createElement("img");r.className="restaurant-img lazyload",r.setAttribute("data-src",DBHelper.imageUrlForRestaurant(e,a)),r.alt=e.name+" resturant picture",n.append(r);var o=document.createElement("h2");o.innerHTML=e.name,o.tabIndex=0,n.append(o);var s=document.createElement("p");s.innerHTML=e.neighborhood,s.tabIndex=0,n.append(s);var i=document.createElement("p");i.innerHTML=e.address,i.tabIndex=0,n.append(i);var l=document.createElement("a");return l.innerHTML="View Details",l.href=DBHelper.urlForRestaurant(e),n.append(l),n},addMarkersToMap=function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants).forEach(function(e){var n=DBHelper.mapMarkerForRestaurant(e,self.map);google.maps.event.addListener(n,"click",function(){window.location.href=n.url}),self.markers.push(n)})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibmVpZ2hib3Job29kcyIsInJlc3RhdXJhbnRzIiwiY3Vpc2luZXMiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImZldGNoTmVpZ2hib3Job29kcyIsIkRCSGVscGVyIiwiZXJyb3IiLCJzZWxmIiwiY29uc29sZSIsImZpbGxOZWlnaGJvcmhvb2RzSFRNTCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsInNlbGVjdCIsImdldEVsZW1lbnRCeUlkIiwiZm9yRWFjaCIsIm5laWdoYm9yaG9vZCIsImNyZWF0ZUVsZW1lbnQiLCJvcHRpb24iLCJ2YWx1ZSIsImZldGNoQ3Vpc2luZXMiLCJmaWxsQ3Vpc2luZXNIVE1MIiwiY3Vpc2luZSIsImlubmVySFRNTCIsIm1hcCIsImdvb2dsZSIsIm1hcHMiLCJNYXAiLCJ6b29tIiwid2luZG93IiwibGF0IiwibG5nIiwidG9nZ2xlX21hcCIsInNjcm9sbHdoZWVsIiwiY1NlbGVjdCIsInVwZGF0ZVJlc3RhdXJhbnRzIiwiY0luZGV4Iiwic2VsZWN0ZWRJbmRleCIsIm5JbmRleCIsIm5TZWxlY3QiLCJyZXNldFJlc3RhdXJhbnRzIiwibWFya2VycyIsIm0iLCJzZXRNYXAiLCJmaWxsUmVzdGF1cmFudHNIVE1MIiwicmVzdGF1cmFudCIsInVsIiwiYXBwZW5kIiwiY3JlYXRlUmVzdGF1cmFudEhUTUwiLCJzbWFsbCIsIm1hdGNoTWVkaWEiLCJhZGRNYXJrZXJzVG9NYXAiLCJzaXplIiwiaW1hZ2UiLCJpbWFnZVVybEZvclJlc3RhdXJhbnQiLCJtZWRpdW0iLCJuYW1lIiwibGkiLCJ0YWJJbmRleCIsImFkZHJlc3MiLCJtb3JlIiwiaHJlZiIsInVybEZvclJlc3RhdXJhbnQiLCJhZGRMaXN0ZW5lciIsIm1hcmtlciIsImxvY2F0aW9uIiwidXJsIiwicHVzaCJdLCJtYXBwaW5ncyI6ImFBQUEsSUFDRUEsSUFERUMsaUJBQUFBLEVBQ0ZELG1CQUFBQSxF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QVcsRUFDaEJELEVBQUdWLE9BQU9TLEdBRVYsSUFBTXhDLEVBQWVmLFNBQVNnQixjQUFjLEtBQzVDRCxFQUFhTyxVQUFZc0IsRUFBVzdCLGFBWHBDQSxFQUFBMEMsU0FBQSxFQWFBRCxFQUFHVixPQUFPL0IsR0FWVnlDLElBQUdWLEVBQUg5QyxTQUFBZ0IsY0FBQSxLQWFBMEMsRUFBUXBDLFVBQVlzQixFQUFXYyxRQVgvQkEsRUFBTUgsU0FBT3ZELEVBQ2J1RCxFQUFBQSxPQUFLakMsR0FFTGtDLElBQUdWLEVBQU9TLFNBQVZ2QyxjQUFBLEtBS0F3QyxPQVFBRyxFQUFLckMsVUFBWSxlQVhqQnFDLEVBQU01QyxLQUFBQSxTQUFlZixpQkFBU2dCLEdBQzlCRCxFQUFBQSxPQUFBQSxHQUVHK0IsR0FrQkxJLGdCQUFrQixZQUFvQyxFQUFBekMsVUFBQUMsYUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQXJCSCxLQUFLUixhQVh2QkUsUUFBU2dCLFNBQUFBLEdBRXRCMkMsSUFBS0MsRUFBT3hELFNBQVN5RCx1QkFBckJqQixFQUFBdEMsS0FBQWlCLEtBQ0FpQyxPQUFBL0IsS0FBQXZCLE1BQUE0RCxZQUFBQyxFQUFBLFFBQUEsV0FhSW5DLE9BQU9vQyxTQUFTSixLQUFPRyxFQUFPRSxNQWxFcEMzRCxLQUFBa0MsUUFBQTBCLEtBQUFIIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgcmVzdGF1cmFudHMsXHJcbiAgbmVpZ2hib3Job29kcyxcclxuICBjdWlzaW5lcztcclxudmFyIG1hcDtcclxudmFyIG1hcmtlcnMgPSBbXTtcclxuXHJcbi8qKlxyXG4gKiBGZXRjaCBuZWlnaGJvcmhvb2RzIGFuZCBjdWlzaW5lcyBhcyBzb29uIGFzIHRoZSBwYWdlIGlzIGxvYWRlZC5cclxuICovXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoZXZlbnQpID0+IHtcclxuICBmZXRjaE5laWdoYm9yaG9vZHMoKTtcclxuICBmZXRjaEN1aXNpbmVzKCk7XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIEZldGNoIGFsbCBuZWlnaGJvcmhvb2RzIGFuZCBzZXQgdGhlaXIgSFRNTC5cclxuICovXHJcbmZldGNoTmVpZ2hib3Job29kcyA9ICgpID0+IHtcclxuICBEQkhlbHBlci5mZXRjaE5laWdoYm9yaG9vZHMoKGVycm9yLCBuZWlnaGJvcmhvb2RzKSA9PiB7XHJcbiAgICBpZiAoZXJyb3IpIHsgLy8gR290IGFuIGVycm9yXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2VsZi5uZWlnaGJvcmhvb2RzID0gbmVpZ2hib3Job29kcztcclxuICAgICAgZmlsbE5laWdoYm9yaG9vZHNIVE1MKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICogU2V0IG5laWdoYm9yaG9vZHMgSFRNTC5cclxuICovXHJcbmZpbGxOZWlnaGJvcmhvb2RzSFRNTCA9IChuZWlnaGJvcmhvb2RzID0gc2VsZi5uZWlnaGJvcmhvb2RzKSA9PiB7XHJcbiAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25laWdoYm9yaG9vZHMtc2VsZWN0Jyk7XHJcbiAgbmVpZ2hib3Job29kcy5mb3JFYWNoKG5laWdoYm9yaG9vZCA9PiB7XHJcbiAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgIG9wdGlvbi5pbm5lckhUTUwgPSBuZWlnaGJvcmhvb2Q7XHJcbiAgICBvcHRpb24udmFsdWUgPSBuZWlnaGJvcmhvb2Q7XHJcbiAgICBzZWxlY3QuYXBwZW5kKG9wdGlvbik7XHJcbiAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICogRmV0Y2ggYWxsIGN1aXNpbmVzIGFuZCBzZXQgdGhlaXIgSFRNTC5cclxuICovXHJcbmZldGNoQ3Vpc2luZXMgPSAoKSA9PiB7XHJcbiAgREJIZWxwZXIuZmV0Y2hDdWlzaW5lcygoZXJyb3IsIGN1aXNpbmVzKSA9PiB7XHJcbiAgICBpZiAoZXJyb3IpIHsgLy8gR290IGFuIGVycm9yIVxyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNlbGYuY3Vpc2luZXMgPSBjdWlzaW5lcztcclxuICAgICAgZmlsbEN1aXNpbmVzSFRNTCgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFNldCBjdWlzaW5lcyBIVE1MLlxyXG4gKi9cclxuZmlsbEN1aXNpbmVzSFRNTCA9IChjdWlzaW5lcyA9IHNlbGYuY3Vpc2luZXMpID0+IHtcclxuICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3Vpc2luZXMtc2VsZWN0Jyk7XHJcblxyXG4gIGN1aXNpbmVzLmZvckVhY2goY3Vpc2luZSA9PiB7XHJcbiAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgIG9wdGlvbi5pbm5lckhUTUwgPSBjdWlzaW5lO1xyXG4gICAgb3B0aW9uLnZhbHVlID0gY3Vpc2luZTtcclxuICAgIHNlbGVjdC5hcHBlbmQob3B0aW9uKTtcclxuICB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIEdvb2dsZSBtYXAsIGNhbGxlZCBmcm9tIEhUTUwuXHJcbiAqL1xyXG53aW5kb3cuaW5pdE1hcCA9ICgpID0+IHtcclxuICB0b2dnbGVfbWFwKCk7XHJcbiAgbGV0IGxvYyA9IHtcclxuICAgIGxhdDogNDAuNzIyMjE2LFxyXG4gICAgbG5nOiAtNzMuOTg3NTAxXHJcbiAgfTtcclxuICBzZWxmLm1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XHJcbiAgICB6b29tOiAxMixcclxuICAgIGNlbnRlcjogbG9jLFxyXG4gICAgc2Nyb2xsd2hlZWw6IGZhbHNlXHJcbiAgfSk7XHJcbiAgdXBkYXRlUmVzdGF1cmFudHMoKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgcGFnZSBhbmQgbWFwIGZvciBjdXJyZW50IHJlc3RhdXJhbnRzLlxyXG4gKi9cclxudXBkYXRlUmVzdGF1cmFudHMgPSAoKSA9PiB7XHJcbiAgY29uc3QgY1NlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdWlzaW5lcy1zZWxlY3QnKTtcclxuICBjb25zdCBuU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25laWdoYm9yaG9vZHMtc2VsZWN0Jyk7XHJcblxyXG4gIGNvbnN0IGNJbmRleCA9IGNTZWxlY3Quc2VsZWN0ZWRJbmRleDtcclxuICBjb25zdCBuSW5kZXggPSBuU2VsZWN0LnNlbGVjdGVkSW5kZXg7XHJcblxyXG4gIGNvbnN0IGN1aXNpbmUgPSBjU2VsZWN0W2NJbmRleF0udmFsdWU7XHJcbiAgY29uc3QgbmVpZ2hib3Job29kID0gblNlbGVjdFtuSW5kZXhdLnZhbHVlO1xyXG5cclxuICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRCeUN1aXNpbmVBbmROZWlnaGJvcmhvb2QoY3Vpc2luZSwgbmVpZ2hib3Job29kLCAoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgICBpZiAoZXJyb3IpIHsgLy8gR290IGFuIGVycm9yIVxyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlc2V0UmVzdGF1cmFudHMocmVzdGF1cmFudHMpO1xyXG4gICAgICBmaWxsUmVzdGF1cmFudHNIVE1MKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICogQ2xlYXIgY3VycmVudCByZXN0YXVyYW50cywgdGhlaXIgSFRNTCBhbmQgcmVtb3ZlIHRoZWlyIG1hcCBtYXJrZXJzLlxyXG4gKi9cclxucmVzZXRSZXN0YXVyYW50cyA9IChyZXN0YXVyYW50cykgPT4ge1xyXG4gIC8vIFJlbW92ZSBhbGwgcmVzdGF1cmFudHNcclxuICBzZWxmLnJlc3RhdXJhbnRzID0gW107XHJcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudHMtbGlzdCcpO1xyXG4gIHVsLmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAvLyBSZW1vdmUgYWxsIG1hcCBtYXJrZXJzXHJcbiAgc2VsZi5tYXJrZXJzLmZvckVhY2gobSA9PiBtLnNldE1hcChudWxsKSk7XHJcbiAgc2VsZi5tYXJrZXJzID0gW107XHJcbiAgc2VsZi5yZXN0YXVyYW50cyA9IHJlc3RhdXJhbnRzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSBhbGwgcmVzdGF1cmFudHMgSFRNTCBhbmQgYWRkIHRoZW0gdG8gdGhlIHdlYnBhZ2UuXHJcbiAqL1xyXG5maWxsUmVzdGF1cmFudHNIVE1MID0gKHJlc3RhdXJhbnRzID0gc2VsZi5yZXN0YXVyYW50cykgPT4ge1xyXG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnRzLWxpc3QnKTtcclxuICByZXN0YXVyYW50cy5mb3JFYWNoKHJlc3RhdXJhbnQgPT4ge1xyXG4gICAgdWwuYXBwZW5kKGNyZWF0ZVJlc3RhdXJhbnRIVE1MKHJlc3RhdXJhbnQpKTtcclxuICB9KTtcclxuICBhZGRNYXJrZXJzVG9NYXAoKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgcmVzdGF1cmFudCBIVE1MLlxyXG4gKi9cclxuY3JlYXRlUmVzdGF1cmFudEhUTUwgPSAocmVzdGF1cmFudCkgPT4ge1xyXG4gIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuICBjb25zdCBzbWFsbCA9ICdzbWFsbCcsIG1lZGl1bSA9ICdtZWRpdW0nLCBiaWcgPSAnYmlnJztcclxuICBsZXQgc2l6ZSA9IHNtYWxsO1xyXG4gIC8vY29uc3Qgd3NtYWxsID0gJzM1MHcnLCB3bWVkaXVtID0gJzU1MHcnLCBiaWcgPSAnODAwdyc7XHJcblxyXG4gIGlmKHdpbmRvdy5tYXRjaE1lZGlhKCdzY3JlZW4gYW5kIChtaW4td2lkdGg6IDEwMDBweCknKSlcclxuICAgIHNpemUgPSBtZWRpdW07XHJcbiAgZWxzZSBpZiAod2luZG93Lm1hdGNoTWVkaWEoJ3NjcmVlbiBhbmQgKG1pbi13aWR0aDogNjAwcHgpJykpXHJcbiAgICBzaXplID0gc21hbGw7XHJcblxyXG4gIC8vY29uc3QgcGljdHVyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3BpY3R1cmUnKTtcclxuICBjb25zdCBpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gIGltYWdlLmNsYXNzTmFtZSA9ICdyZXN0YXVyYW50LWltZyBsYXp5bG9hZCc7XHJcbiAgLy9pbWFnZS5zcmMgPSAnJztcclxuICBpbWFnZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3JjJywgREJIZWxwZXIuaW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQsIHNpemUpKTtcclxuICBpbWFnZS5hbHQgPSByZXN0YXVyYW50Lm5hbWUgKyAnIHJlc3R1cmFudCBwaWN0dXJlJztcclxuICAvKmlmKHJlc3RhdXJhbnQuaWQgPT0gMTApe1xyXG4gICAgaW1hZ2Uuc2V0QXR0cmlidXRlKCdvbmxvYWQnLCAnbGF6eUxvYWQoKScpO1xyXG4gIH0qL1xyXG4gIC8qaW1hZ2Uuc3Jjc2V0ID0gYCR7REJIZWxwZXIuaW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQsIHNtYWxsKX0gJHt3c21hbGx9LFxyXG4gICAgICAgICAgICAgICAgICAgICR7REJIZWxwZXIuaW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQsIG1lZGl1bSl9ICR7d21lZGl1bX0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR7REJIZWxwZXIuaW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQsIGJpZyl9ICR7d2JpZ31gOyovXHJcbiAgLypjb25zdCBzb3VyY2UxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc291cmNlJyk7XHJcbiAgc291cmNlMS5tZWRpYSA9IFwic2NyZWVuIGFuZCAobWluLXdpZHRoOiA2MDBweClcIjtcclxuICBzb3VyY2UxLnNyY3NldCA9IERCSGVscGVyLmltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCBtZWRpdW0pO1xyXG4gIGNvbnN0IHNvdXJjZTIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzb3VyY2UnKTtcclxuICBzb3VyY2UyLm1lZGlhID0gXCJzY3JlZW4gYW5kIChtaW4td2lkdGg6IDEwMDBweClcIjtcclxuICBzb3VyY2UyLnNyY3NldCA9IERCSGVscGVyLmltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCBiaWcpOyovXHJcbiAgXHJcbiAgLypwaWN0dXJlLmFwcGVuZENoaWxkKGltYWdlKTtcclxuICBwaWN0dXJlLmFwcGVuZENoaWxkKHNvdXJjZTEpO1xyXG4gIHBpY3R1cmUuYXBwZW5kQ2hpbGQoc291cmNlMik7Ki8gICAgICAgICAgICAgICAgICAgICAgXHJcbiAgbGkuYXBwZW5kKGltYWdlKTtcclxuXHJcbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XHJcbiAgbmFtZS5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5hbWU7XHJcbiAgbmFtZS50YWJJbmRleCA9IDA7XHJcbiAgbGkuYXBwZW5kKG5hbWUpO1xyXG5cclxuICBjb25zdCBuZWlnaGJvcmhvb2QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgbmVpZ2hib3Job29kLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmVpZ2hib3Job29kO1xyXG4gIG5laWdoYm9yaG9vZC50YWJJbmRleCA9IDA7XHJcbiAgbGkuYXBwZW5kKG5laWdoYm9yaG9vZCk7XHJcblxyXG4gIGNvbnN0IGFkZHJlc3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgYWRkcmVzcy5pbm5lckhUTUwgPSByZXN0YXVyYW50LmFkZHJlc3M7XHJcbiAgYWRkcmVzcy50YWJJbmRleCA9IDA7XHJcbiAgbGkuYXBwZW5kKGFkZHJlc3MpO1xyXG5cclxuICBjb25zdCBtb3JlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gIG1vcmUuaW5uZXJIVE1MID0gJ1ZpZXcgRGV0YWlscyc7XHJcbiAgbW9yZS5ocmVmID0gREJIZWxwZXIudXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KTtcclxuICBsaS5hcHBlbmQobW9yZSk7XHJcblxyXG4gIHJldHVybiBsaTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBBZGQgbWFya2VycyBmb3IgY3VycmVudCByZXN0YXVyYW50cyB0byB0aGUgbWFwLlxyXG4gKi9cclxuYWRkTWFya2Vyc1RvTWFwID0gKHJlc3RhdXJhbnRzID0gc2VsZi5yZXN0YXVyYW50cykgPT4ge1xyXG4gIHJlc3RhdXJhbnRzLmZvckVhY2gocmVzdGF1cmFudCA9PiB7XHJcbiAgICAvLyBBZGQgbWFya2VyIHRvIHRoZSBtYXBcclxuICAgIGNvbnN0IG1hcmtlciA9IERCSGVscGVyLm1hcE1hcmtlckZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgc2VsZi5tYXApO1xyXG4gICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFya2VyLCAnY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gbWFya2VyLnVybDtcclxuICAgIH0pO1xyXG4gICAgc2VsZi5tYXJrZXJzLnB1c2gobWFya2VyKTtcclxuICB9KTtcclxufTtcclxuIl19
